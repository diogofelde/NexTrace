<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>NexTrace - Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <h1>NexTrace - Painel SOC/NOC</h1>
  <form id="loginForm">
    <label for="user">Usuário</label>
    <input type="text" id="user" required placeholder="Digite seu usuário">
    <label for="pass">Senha</label>
    <input type="password" id="pass" required placeholder="Digite sua senha">
    <button type="submit">Entrar</button>
  </form>
  <a href="reset.html">Esqueci minha senha</a>
  <script>
    document.getElementById('loginForm').onsubmit = async (e) => {
      e.preventDefault();
      const user = document.getElementById('user').value.trim();
      const pass = document.getElementById('pass').value;

      try {
        const res = await fetch(`/api/login?user=${encodeURIComponent(user)}&pass=${encodeURIComponent(pass)}`);
        const json = await res.json();

        if (json.ok) {
          window.location.href = "painel.html";
        } else {
          alert("Usuário ou senha inválidos");
        }
      } catch (err) {
        alert("Erro ao conectar com o servidor");
      }
    };
  </script>
</body>
</html>
